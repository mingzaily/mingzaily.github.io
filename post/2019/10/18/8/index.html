<!DOCTYPE html>
<html lang="zh-CN">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>数据库 - 星河</title>
    <meta property="og:title" content="数据库 - 星河">
    
    <meta name="twitter:card" content="summary">

    
    
      
    

    
      
      <meta property="description" content="官方方对索引的定义为：索引是帮助 MySQL 高效获取数据的数据结构
[&hellip;] 为什么要用索引
[&hellip;] 索引的优缺点
[&hellip;] 什么样的信息能成为索引
[&hellip;] 索引的数据结构
[&hellip;] 密集索引和稀疏索引的区别
[&hellip;] 如何定位并优化慢查询 sql
[&hellip;] 联合索引的最左匹配原则的成因
[&hellip;] &amp;hellip;">
      <meta property="og:description" content="官方方对索引的定义为：索引是帮助 MySQL 高效获取数据的数据结构
[&hellip;] 为什么要用索引
[&hellip;] 索引的优缺点
[&hellip;] 什么样的信息能成为索引
[&hellip;] 索引的数据结构
[&hellip;] 密集索引和稀疏索引的区别
[&hellip;] 如何定位并优化慢查询 sql
[&hellip;] 联合索引的最左匹配原则的成因
[&hellip;] &amp;hellip;">
      
    

    
    
    

    

    
    

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/diary.css" />
    
  </head>
  <body class="post">
    <header class="masthead">
      <h1><a href="/">星河</a></h1>

<p class="tagline">醉后不知天在水，满船清梦压星河</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">首页</a></li>
  
  <li><a href="/shuoshuo">说说</a></li>
  
  <li><a href="/categories/">分类</a></li>
  
  <li><a href="/tags/">标签</a></li>
  
  <li><a href="/about/">关于</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>数据库</h1>



<h3>

mingzaily






 / 
2019-10-18
</h3>

<hr>


      </header>





<h2 id="数据库架构">数据库架构</h2>
<h3 id="数据库设计">数据库设计</h3>
<ul>
<li>程序实例
<ul>
<li>存储管理</li>
<li>缓存机制</li>
<li>SQL 解析</li>
<li>日志管理</li>
<li>权限划分</li>
<li>容灾机制</li>
<li>索引管理</li>
<li>锁管理</li>
</ul>
</li>
<li>存储（文件系统）</li>
</ul>
<h3 id="索引模块">索引模块</h3>
<p>官方方对索引的定义为：索引是帮助 MySQL 高效获取数据的数据结构</p>
<ol>
<li>
<p>为什么要用索引</p>
<ul>
<li>快速查询数据</li>
<li>保证数据的唯一性</li>
</ul>
</li>
<li>
<p>索引的优缺点</p>
<ul>
<li>优点
<ul>
<li>大大加快数据检索速度</li>
<li>创建唯一索引，保证数据库表中每行数据的唯一性</li>
<li>加速表之间的连接</li>
<li>减少查询中分组和排序的时间</li>
</ul>
</li>
<li>缺点
<ul>
<li>需要占用物理空间</li>
<li>对表中数据进行增加、删除和修改时索引也要更新，降低了数据维护速度</li>
</ul>
</li>
</ul>
</li>
<li>
<p>什么样的信息能成为索引</p>
<ul>
<li>主键、唯一键以及普通键等等</li>
</ul>
</li>
<li>
<p>索引的数据结构</p>
<ul>
<li>生成索引，建立二叉查找树进行二分查找 效率 O(logn)</li>
<li>生成索引，建立 B-Tree 进行查找 效率 O(logn)
<ul>
<li>B-Tree</li>
<li>根节点至少包括两个孩子</li>
<li>树中每个节点最多含有 m 个孩子(m&gt;=2)</li>
<li>除根节点和叶子节点外，其他每个节点至少有 ceil(m/2)个孩子</li>
<li>所有叶子节点都位于同一层</li>
</ul>
</li>
<li>生成索引，建立 B+-Tree 进行查找（主流）
<ul>
<li>定义基本与 B-Tree 一致</li>
<li>非叶子节点的子树指针与关键字个数相同</li>
<li>非叶子节点仅使用索引，数据都保存在叶子节点中</li>
<li>所有叶子节点均有一个链指针指向下一个叶子节点</li>
<li>B+-Tree 更适合用来做存储引擎
<ul>
<li>B+树的磁盘读写代价更低</li>
<li>B+树的查询效率更加稳定</li>
<li>B+树更有利于对数据库的扫描</li>
</ul>
</li>
</ul>
</li>
<li>生成索引，建立 Hash 结构进行查找
<ul>
<li>查询效率更高</li>
<li>缺点
<ul>
<li>仅仅能满足&quot;=&quot;，&ldquo;IN&rdquo;，不能使用范围查询</li>
<li>无法被用来避免数据的排序操作</li>
<li>不能利用部分索引键查询</li>
<li>不能避免表扫码</li>
<li>遇到大量 Hash 值相等的情况后性能并不一定就会比 B-Tree 索引高</li>
</ul>
</li>
</ul>
</li>
<li>BitMap 索引</li>
</ul>
</li>
<li>
<p>密集索引和稀疏索引的区别</p>
<ul>
<li>密集索引文件中的每个搜索码值都对应一个索引值</li>
<li>稀疏索引文件只为索引码的某些值建立索引项</li>
</ul>
</li>
<li>
<p>如何定位并优化慢查询 sql</p>
<ul>
<li>根据慢日志定位慢查询 sql</li>
<li>使用 explain 等工具分析 sql</li>
<li>修改 sql 或者尽量让 sql 走索引</li>
</ul>
</li>
<li>
<p>联合索引的最左匹配原则的成因</p>
<ul>
<li>mysql 创建复合索引的规则是首先会对复合索引的最左边，也就是索引中的第一个字段进行排序，在第 一个字段排序的基础上，在对索引上第二个字段进行排序，其实就像是实现类似 order by 字段 1，字段 2 这样的排序规则，那么第一个字段是绝对有序的，而第二个字段就是无序的了，因此一般情况下直接只用第二个字段判断是用不到索引的，这就是为什么 mysql 要强调联合索引最左匹配原则的原因</li>
</ul>
</li>
<li>
<p>索引是建立得越多越好吗</p>
<ul>
<li>数据量小的表不需要建立索引，建立会增加额外的索引开销</li>
<li>数据变更需要维护索引，意味着更多的索引意味着更多的维护成本</li>
<li>更多的索引也需要跟多的存储空间</li>
</ul>
</li>
</ol>



  <footer>
  
  

  
  <hr>
  <div class="copyright">© <a href="https://mingzaily.com">mingzaily</a> 2019-2024 | <a href="https://github.com/mingzaily">Github</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

